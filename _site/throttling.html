<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dependable</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <script src="libs/modernizr/modernizr.js"></script>

    <link rel="stylesheet" href="libs/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="libs/font-awesome/font-awesome.min.css">
    <link rel="stylesheet" href="assets/styles/site.css">
    <link rel="stylesheet" href="assets/styles/highlight.css">
</head>

<body>
    <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
    <div class="navbar navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <h1>
                    <img src="assets/images/Dependable.64.png">Depdendable</h1>

            </div>
            <div class="navbar-collapse collapse">

                <div class="navbar-right">
                    <a class="icon-link" href="https://github.com/buddhike/dependable">
                        <i class="fa fa-github"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?button_hashtag=depproject" class="icon-link" data-related="buddyspike28">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <script>
                    ! function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0],
                            p = /^http:/.test(d.location) ? 'http' : 'https';
                        if (!d.getElementById(id)) {
                            js = d.createElement(s);
                            js.id = id;
                            js.src = p + '://platform.twitter.com/widgets.js';
                            fjs.parentNode.insertBefore(js, fjs);
                        }
                    }(document, 'script', 'twitter-wjs');
                    </script>
                </div>
            </div>

        </div>
        <div class="container">
            <div class="navbar-header">.net library for reliable job running</div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/" class="dropdown-toggle" data-toggle="dropdown" style="background: mediumseagreen;color: white;">Basics<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="/#introduction">Introduction</a>
                        </li>                       
                        <li>
                            <a href="/#installation">Installation</a>
                        </li>             

                        <li class="divider"></li>                                  
                        <li class="dropdown-header">Getting Started</li>
                        
                        <li>
                            <a href="/#creating-a-job">Creating a Job</a>
                        </li>                        
                        <li>
                            <a href="/#creating-a-scheduler">Creating Scheduler</a>
                        </li>
                        <li>
                            <a href="/#scheduling-a-job">Scheduling a Job</a>
                        </li>                       
                        <li>
                            <a href="/#passing-arguments-to-jobs">Passing Arguments to Jobs</a>
                        </li>

                        <li class="divider"></li>                         
                        <li class="dropdown-header">Reliability Features</li>                       
                        
                        <li>
                            <a href="/#retry">Retry</a>
                        </li>                
                        <li>
                            <a href="/#poison">Poison</a>
                        </li>                 
                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Complex Jobs</li>                       
                        
                        <li>
                            <a href="/#job-trees">Job Trees</a>
                        </li>                
                        <li>
                            <a href="/#compensation">Compensation</a>
                        </li>                 
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="background: coral;color: white;">Advanced<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">                        
                        <li class="dropdown-header">Features</li>
                        <li><a href="/tracking.html">Tracking</a>
                        </li>
                        
                        <li><a href="/throttling.html">Throttling</a>
                        </li>
                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Extensibility</li>
                        
                        <li>
                            <a href="/extensibility.html#persistence-providers">Persistence Providers</a>
                        </li>
                        <li>
                            <a href="/extensibility.html#event-sinks">Event Sinks</a>
                        </li>
                        <li>
                            <a href="/extensibility.html#dependency-resolvers">Dependency Resolvers</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="/extensions.html" class="dropdown-toggle" data-toggle="dropdown" style="background: deepskyblue;color: white;">Extensions<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">                                                
                        <li class="divider"></li>
                        <li class="dropdown-header">Persistence</li>
                        
                        <li>
                            <a href="/extensions.html#sql-server-persistence-extension">SQL Server Persistence Extension</a>
                        </li>                        
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="container" style="margin-top:130px;">
        <div class="row-fluid">
            <div class="col-sm-12 main">
                
<h3><a name="throttling" class="anchor"></a>Throttling</h3>

<p>Sometimes jobs we scheduler could be resource intensive and we have limited amount of resources to spare. For example, number of CPU intensive jobs you can perform simultaniously is limited to the number of cores you have. As another example, number of concurrent calls you can make to to an external service might be limited by the agreement you have with the service provider.</p>

<p>When configuring jobs, you can specify the maximum number of job instances that Dependable can execute at point in time. </p>
<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">scheduler</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DependableConfiguration</span><span class="p">()</span>
                    <span class="p">.</span><span class="n">Job</span><span class="p">&lt;</span><span class="n">LongRunningJob</span><span class="p">&gt;(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">WithMaxWorkers</span><span class="p">(</span><span class="m">8</span><span class="p">))</span>
                    <span class="p">.</span><span class="n">CreateScheduler</span><span class="p">();</span>
</code></pre></div>
<p>Internally, Dependable has a queuing system to control the execution of your jobs. One potential problem with applying a throttle is that if you queue work faster than your can process them, Dependable could exhaust your memory due to increasing queue length. To get around that problem, Dependable sets the max queue length to 1000 jobs by default. As soon as it reaches this limit it will start flushing jobs to persistence system. You can control this queue length for specific jobs in the configuration.</p>
<div class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">scheduler</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DependableConfiguration</span><span class="p">()</span>
                    <span class="p">.</span><span class="n">Job</span><span class="p">&lt;</span><span class="n">LongRunningJob</span><span class="p">&gt;(</span><span class="n">c</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">WithMaxQueueLength</span><span class="p">(</span><span class="m">2000</span><span class="p">))</span>
                    <span class="p">.</span><span class="n">CreateScheduler</span><span class="p">();</span>
</code></pre></div>
            </div>
        </div>
    </div>
    <div class="footer">
        <p>Dependable - 2014</p>
    </div>
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54000572-1', 'auto');
    ga('send', 'pageview');
    </script>

    <script src="libs/jquery/jquery.min.js"></script>
    <script src="libs/bootstrap/bootstrap.min.js"></script>
</body>

</html>
